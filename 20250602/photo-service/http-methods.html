<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTTP Methods Practice</title>
</head>
<body>
  <h2>ğŸš€ HTTP ë©”ì„œë“œ ì‹¤ìŠµ</h2>

  <!-- ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê° ë©”ì„œë“œ(GET, POST ë“±)ë¥¼ ì‹¤í–‰í•¨ -->
  <button onclick="getData()">GET(ê°€ì ¸ì˜¤ê¸°)</button>
  <button onclick="postData()">POST(ì¶”ê°€)</button>
  <button onclick="putData()">PUT(ì „ì²´ ìˆ˜ì •)</button>
  <button onclick="patchData()">PATCH(ì¼ë¶€ ìˆ˜ì •)</button>
  <button onclick="deleteData()">DELETE(ì‚­ì œ)</button>

  <!-- ê²°ê³¼ë¥¼ ì¶œë ¥í•  ì˜ì—­ -->
  <pre id="output"></pre>

  <script>
    // ê²°ê³¼ë¥¼ ì¶œë ¥í•  HTML ìš”ì†Œë¥¼ ê°€ì ¸ì˜´
    const output = document.getElementById('output');

    // ìš”ì²­ì„ ë³´ë‚¼ ê¸°ë³¸ ì£¼ì†Œ(API ì£¼ì†Œ)
    const BASE_URL = 'https://jsonplaceholder.typicode.com/posts';

    // í™”ë©´ì— ë°ì´í„°ë¥¼ ë³´ê¸° ì¢‹ê²Œ ì¶œë ¥í•´ì£¼ëŠ” í•¨ìˆ˜
    function show(data) {
      // JSON.stringify: ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¿ˆ
      // ë‘ ë²ˆì§¸ ì¸ì nullì€ í•„í„°ë¥¼ ì•ˆ ì“°ê² ë‹¤ëŠ” ì˜ë¯¸
      // ì„¸ ë²ˆì§¸ ì¸ì 2ëŠ” ë“¤ì—¬ì“°ê¸°(ì˜ˆì˜ê²Œ ì •ë ¬)
      output.textContent = JSON.stringify(data, null, 2);
    }

    // 1ï¸âƒ£ GET ìš”ì²­ â€“ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    async function getData() {
      // ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µ(response)ì„ ê¸°ë‹¤ë¦¼
      const res = await fetch(BASE_URL);

      // ì‘ë‹µì—ì„œ JSON í˜•ì‹ì˜ ì‹¤ì œ ë°ì´í„°ë¥¼ êº¼ëƒ„
      const data = await res.json();

      // ì²˜ìŒ 3ê°œë§Œ í™”ë©´ì— ì¶œë ¥
      show(data.slice(0, 3));
    }

    // 2ï¸âƒ£ POST ìš”ì²­ â€“ ìƒˆë¡œìš´ ë°ì´í„° ì¶”ê°€
    async function postData() {
      const res = await fetch(BASE_URL, {
        method: 'POST', // ì„œë²„ì— ìƒˆ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ê² ë‹¤ëŠ” ì˜ë¯¸
        headers: {
          'Content-Type': 'application/json' // ë³´ë‚´ëŠ” ë°ì´í„°ê°€ JSON í˜•ì‹ì„ì„ ì•Œë ¤ì¤Œ
        },
        body: JSON.stringify({
          title: 'New Post',     // ìƒˆ ê¸€ ì œëª©
          body: 'Hello world!',  // ìƒˆ ê¸€ ë‚´ìš©
          userId: 1              // ì‘ì„±ì ID
        })
      });

      const data = await res.json(); // ì‘ë‹µ ë°ì´í„° ë°›ê¸°
      show(data); // ê²°ê³¼ ì¶œë ¥
    }

    // 3ï¸âƒ£ PUT ìš”ì²­ â€“ ê¸°ì¡´ ë°ì´í„° ì „ì²´ ìˆ˜ì •
    async function putData() {
      const res = await fetch(`${BASE_URL}/1`, {
        method: 'PUT', // ì „ì²´ ë‚´ìš©ì„ ìƒˆ ê±¸ë¡œ ë®ì–´ì”€
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          id: 1,                         // ìˆ˜ì •í•  ê²Œì‹œë¬¼ ID
          title: 'Updated Title',       // ìƒˆ ì œëª©
          body: 'Updated body',         // ìƒˆ ë‚´ìš©
          userId: 1
        })
      });

      const data = await res.json();
      show(data);
    }

    // 4ï¸âƒ£ PATCH ìš”ì²­ â€“ ê¸°ì¡´ ë°ì´í„° ì¼ë¶€ë§Œ ìˆ˜ì •
    async function patchData() {
      const res = await fetch(`${BASE_URL}/1`, {
        method: 'PATCH', // ì¼ë¶€ë§Œ ë°”ê¿€ ë•Œ ì‚¬ìš©
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          title: 'Partially Updated' // ì œëª©ë§Œ ë°”ê¿ˆ
        })
      });

      const data = await res.json();
      show(data);
    }

    // 5ï¸âƒ£ DELETE ìš”ì²­ â€“ ë°ì´í„° ì‚­ì œ
    async function deleteData() {
      const res = await fetch(`${BASE_URL}/1`, {
        method: 'DELETE' // í•´ë‹¹ ê²Œì‹œë¬¼ì„ ì‚­ì œí•¨
      });

      // ì‚­ì œ ì„±ê³µ ì—¬ë¶€ í™•ì¸
      if (res.ok) {
        show({ message: 'ì‚­ì œ ì„±ê³µ âœ…' });
      } else {
        show({ error: 'ì‚­ì œ ì‹¤íŒ¨ âŒ' });
      }
    }
  </script>
</body>
</html>
